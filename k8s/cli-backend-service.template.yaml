# This is a template file for k8s service for a cli-backend service
# Variables should be injected (and will be using "envsubst" GH Action) using GH Action
# This file wont be used explicitly with "kubectl"
apiVersion: v1
kind: Service
metadata:
    name: cli-backend-service
    annotations:
        service.beta.kubernetes.io/aws-load-balancer-ssl-cert: $SSL_CERTIFICATE_ARN
        service.beta.kubernetes.io/aws-load-balancer-backend-protocol: http
        service.beta.kubernetes.io/aws-load-balancer-ssl-ports: https
spec:
    selector:
        app: dashboard-cli-backend
    type: LoadBalancer
    ports:
        - name: https
          protocol: TCP
          port: '$PORT'
          targetPort: '$PORT'
